--
-- Base de donn√©es :  `incident_cycliste`
--
CREATE DATABASE IF NOT EXISTS `incident_cycliste` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
USE `incident_cycliste`;

CREATE TABLE `incident_cycliste`.`Utilisateur` ( `idUtilisateur` INT NOT NULL AUTO_INCREMENT , `login` VARCHAR(20) NOT NULL , `mdp` VARCHAR(20) NOT NULL , `surnom` VARCHAR(20) NOT NULL , PRIMARY KEY (`idUtilisateur`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`Incident` ( `idIncident` INT NOT NULL AUTO_INCREMENT , `niveauUrgence` VARCHAR(20) NOT NULL , `description` TEXT NOT NULL , `cloture` BOOLEAN NULL DEFAULT FALSE , `raisonCloture` ENUM('nullite','reparation') NULL DEFAULT NULL , `longLat` VARCHAR(10) NOT NULL , `idUtilisateur` INT NOT NULL , `idPortionRoute` INT NOT NULL , `idCategorie` INT NOT NULL , PRIMARY KEY (`idIncident`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`Categorie` ( `idCategorie` INT NOT NULL AUTO_INCREMENT , `nomCategorie` ENUM('revetement','travaux','permanent','trafic','autre') NOT NULL , PRIMARY KEY (`idCategorie`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`sousCategorie` ( `idSousCategorie` INT(20) NOT NULL AUTO_INCREMENT , `nomSousCategorie` VARCHAR(60) NOT NULL , `idCategorie` INT NOT NULL , PRIMARY KEY (`idSousCategorie`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`Analyste` ( `idUtilisateurAnalyste` INT NOT NULL , PRIMARY KEY (`idUtilisateurAnalyste`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`Administrateur` ( `idUtilisateurAdministrateur` INT(11) NOT NULL , PRIMARY KEY (`idUtilisateurAdministrateur`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`Commune` ( `idCommune` INT(11) NOT NULL , `nom` VARCHAR(20) NOT NULL , PRIMARY KEY (`idCommune`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`Quartier` ( `idQuartier` INT(11) NOT NULL , `nom` VARCHAR(20) NOT NULL , `idCommune` INT(11) NOT NULL , PRIMARY KEY (`idQuartier`)) ENGINE = InnoDB;

CREATE TABLE `incident_cycliste`.`PortionRoute` ( `idPortionRoute` INT(11) NOT NULL , `nom` VARCHAR(20) NOT NULL , `idQuartier` INT(11) NOT NULL , PRIMARY KEY (`idPortionRoute`)) ENGINE = InnoDB;
